<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Animation Tribunes Synchronisée</title>
<style>
  body { margin:0; }
</style>
</head>
<body>

<script>
  const colors = ["#FF0020", "#FFFFFF"]; // rouge / blanc
  const interval = 500; // durée d'une couleur en ms
  let t0 = null; // temps central synchronisé

  // Récupérer l'heure UTC depuis un serveur public
  async function fetchUTCTime() {
    try {
      const response = await fetch("https://worldtimeapi.org/api/timezone/Etc/UTC");
      const data = await response.json();
      t0 = data.unixtime * 1000; // ms depuis 1970
      requestAnimationFrame(updateColor); // on lance l'animation
    } catch (error) {
      console.error("Impossible de récupérer l'heure UTC, utilisation locale :", error);
      t0 = Date.now(); // fallback
      requestAnimationFrame(updateColor);
    }
  }

  // Fonction qui calcule la couleur à afficher à chaque frame
  function updateColor() {
    const now = Date.now();
    const elapsed = now - t0; // ms écoulés depuis t0
    const index = Math.floor(elapsed / interval) % colors.length;
    document.body.style.backgroundColor = colors[index];
    requestAnimationFrame(updateColor);
  }

  fetchUTCTime(); // récupère le temps et démarre l'animation
</script>

</body>
</html>
