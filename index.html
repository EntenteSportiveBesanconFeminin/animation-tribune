<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Animation Tribunes Synchronisée</title>
<style>
  body { margin:0; }
</style>
</head>
<body>

<script>
  const colors = ["#FF0020", "#FFFFFF"]; // rouge / blanc
  const interval = 350; // durée d'une couleur en ms

  let t0 = null; // temps de départ central

  // Fonction pour récupérer l'heure UTC depuis un serveur public
  async function fetchUTCTime() {
    try {
      const response = await fetch("https://worldtimeapi.org/api/timezone/Etc/UTC");
      const data = await response.json();
      // "unixtime" est en secondes, on convertit en ms
      t0 = data.unixtime * 1000; 
      startAnimation();
    } catch (error) {
      console.error("Impossible de récupérer l'heure UTC, utilisation locale :", error);
      t0 = Date.now(); // fallback : horloge locale
      startAnimation();
    }
  }

  function startAnimation() {
    function updateColor() {
      const now = Date.now();
      const elapsed = now - t0; // ms écoulés depuis t0
      const index = Math.floor(elapsed / interval) % colors.length;
      document.body.style.backgroundColor = colors[index];
      requestAnimationFrame(updateColor);
    }
    updateColor();
  }

  fetchUTCTime(); // démarre tout
</script>

</body>
</html>
